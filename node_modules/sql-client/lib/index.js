// Generated by CoffeeScript 1.8.0
(function() {
  var HOMEDIR, LIB, LIB_COV, LIB_DIR, conditional_sources, err, export_source_file, file, fs, path, required_module, sources, _i, _j, _len, _len1, _ref;

  fs = require('fs');

  path = require('path');

  HOMEDIR = path.join(__dirname, '..');

  LIB_COV = path.join(HOMEDIR, 'lib-cov');

  LIB = path.join(HOMEDIR, 'lib');

  LIB_DIR = fs.existsSync(LIB_COV) ? LIB_COV : LIB;

  export_source_file = function(file) {
    var exported, k, p, target, v, _i, _len, _ref, _results;
    target = exports;
    if (Array.isArray(file)) {
      _ref = file.slice(0, -1);
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        p = _ref[_i];
        if (target[p] == null) {
          target[p] = {};
        }
        target = target[p];
        file = path.join.apply(path, file);
      }
    }
    exported = require(path.join(LIB_DIR, file));
    _results = [];
    for (k in exported) {
      v = exported[k];
      _results.push(target[k] = v);
    }
    return _results;
  };

  sources = ['connection-factory', 'sql-client', 'sql-client-pool', 'sql-runner'];

  for (_i = 0, _len = sources.length; _i < _len; _i++) {
    file = sources[_i];
    export_source_file(file);
  }

  conditional_sources = [['pg', 'postgresql-client'], ['pg', ['bin', 'postgresql-runner']], ['mysql', 'mysql-client'], ['mysql', ['bin', 'mysql-runner']], ['sqlite3', 'sqlite3-client'], ['sqlite3', ['bin', 'sqlite3-runner']]];

  for (_j = 0, _len1 = conditional_sources.length; _j < _len1; _j++) {
    _ref = conditional_sources[_j], required_module = _ref[0], file = _ref[1];
    try {
      require(required_module);
      export_source_file(file);
    } catch (_error) {
      err = _error;
    }
  }

}).call(this);
