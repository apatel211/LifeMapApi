// Generated by CoffeeScript 1.8.0
(function() {
  var ConnectionFactory,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    __slice = [].slice;

  ConnectionFactory = (function() {
    function ConnectionFactory() {
      this.pre_process_sql = __bind(this.pre_process_sql, this);
      this.execute = __bind(this.execute, this);
      this.close_connection = __bind(this.close_connection, this);
      this.open_connection = __bind(this.open_connection, this);
    }

    ConnectionFactory.prototype.open_connection = function() {
      var callback, options, _i;
      options = 2 <= arguments.length ? __slice.call(arguments, 0, _i = arguments.length - 1) : (_i = 0, []), callback = arguments[_i++];
      return typeof callback === "function" ? callback(new Error("open_connection not implemented; please override")) : void 0;
    };

    ConnectionFactory.prototype.close_connection = function(connection, callback) {
      if (typeof (connection != null ? connection.end : void 0) === 'function') {
        connection.end();
        return typeof callback === "function" ? callback() : void 0;
      } else if (typeof (connection != null ? connection.close : void 0) === 'function') {
        connection.close();
        return typeof callback === "function" ? callback() : void 0;
      } else {
        return typeof callback === "function" ? callback(new Error("close_connection not implemented; please override")) : void 0;
      }
    };

    ConnectionFactory.prototype.execute = function(connection, sql, bindvars, callback) {
      if (typeof connection.query === 'function') {
        return connection.query(sql, bindvars, callback);
      } else {
        return callback(new Error("execute not implemented; please override"));
      }
    };

    ConnectionFactory.prototype.pre_process_sql = function(sql, bindvars, callback) {
      return callback(null, sql, bindvars);
    };

    return ConnectionFactory;

  })();

  exports.ConnectionFactory = ConnectionFactory;

}).call(this);
